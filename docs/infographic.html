<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linux Installer: Baseline for Development & Audio Studio OS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F9FA; /* NeutralLight */
            color: #212529; /* Text */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px; /* Default max-width, can be overridden by Tailwind */
            margin-left: auto;
            margin-right: auto;
            height: 300px; /* Base height */
            max-height: 450px; /* Max height */
        }
        @media (min-width: 768px) { /* md breakpoint */
            .chart-container {
                height: 350px;
            }
        }
        @media (min-width: 1024px) { /* lg breakpoint */
            .chart-container {
                height: 400px;
            }
        }
        .section-title {
            color: #007BFF; /* Primary */
        }
        .card {
            background-color: white;
            border-radius: 0.5rem; /* rounded-lg */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); /* shadow-md */
            padding: 1.5rem; /* p-6 */
            margin-bottom: 1.5rem; /* mb-6 */
        }
        .stat-number {
            color: #28A745; /* Secondary */
            font-weight: 700; /* bold */
        }
        .flowchart-step {
            background-color: #007BFF; /* Primary */
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.375rem; /* rounded-md */
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .flowchart-arrow {
            display: flex;
            align-items: center;
            justify-content: center;
            color: #343A40; /* NeutralDark */
            font-size: 1.5rem; /* text-2xl */
            margin: 0.5rem 0;
        }
        .sticky-nav {
            position: -webkit-sticky; /* Safari */
            position: sticky;
            top: 0;
            z-index: 50;
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
        }
        .project-initiative {
            background-color: #F0F8FF; /* Light blue, similar to blue-50 */
            border-left: 4px solid #007BFF; /* Primary */
            padding: 1rem;
            border-radius: 0.375rem;
            margin-bottom: 1rem;
        }
        /* Palette: Vibrant Tech
           Primary: #007BFF (Bright Blue)
           Secondary: #28A745 (Green)
           Accent1: #FFC107 (Yellow)
           Accent2: #DC3545 (Red)
           NeutralDark: #343A40 (Dark Gray)
           NeutralLight: #F8F9FA (Light Gray)
           Text: #212529 (Near Black)
        */
    </style>
</head>
<body class="antialiased">
    <!-- 
    Infographic Plan:
    1. Introduction & Overview: Hook, intro to installer, total unique packages. Mention project evolution.
    2. Package Ecosystem Redefined: Donut chart (Core vs. Essential), key stats. Update narrative to new categories.
    3. The Desktop Experience:
        3.1. WM Landscape: Bar chart (WM component counts). Highlight Sway.
        3.2. Login & Shell: Grouped Bar chart (Login managers, Shells).
        3.3. Common Desktop Utilities: Bubble chart (WM_PKGS sub-categories).
    4. Hardware & Filesystem Support: Stacked Bar chart (Microcode, FS Tools, Firmware).
    5. User-Selectable Applications: Pictograph/Icon Array (App categories).
    6. Installation Process Insights: HTML/CSS Flow Chart (Current installer.sh flow). New section for Ansible flow.
    7. Project Modernization Initiatives: New section detailing Ansible migration, pre-flight script, testing, documentation, Sway.
    8. Dynamic Insights: LLM-powered package explanation and config tips.
    9. Future Outlook & Conclusion: Summary.

    Color Palette Chosen: "Vibrant Tech" (details in style block and comments)
    - Primary: #007BFF (Bright Blue)
    - Secondary: #28A745 (Green)
    - Accent1: #FFC107 (Yellow)
    - Accent2: #DC3545 (Red)
    - NeutralDark: #343A40 (Dark Gray)
    - NeutralLight: #F8F9FA (Light Gray)
    - Text: #212529 (Near Black)

    Visualization Choices (Confirming NO SVG, NO MERMAID JS):
    - Total Unique Packages: (Inform) -> Single Big Number (HTML/CSS). No SVG.
    - Core vs. Essential Tools Proportion: (Compare) -> Donut Chart (Chart.js Canvas). No SVG.
    - WM Component Packages: (Compare) -> Bar Chart (Chart.js Canvas). No SVG.
    - Login/Shell Popularity: (Compare) -> Grouped Bar Chart (Chart.js Canvas). No SVG.
    - Common Desktop Utilities Sub-categories: (Compare) -> Bubble Chart (Chart.js Canvas). No SVG.
    - Hardware/FS Support: (Compare/Composition) -> Stacked Bar Chart (Chart.js Canvas). No SVG.
    - User-Selectable App Categories: (Inform/Compare) -> Pictograph (HTML/CSS + Unicode). No SVG.
    - Installation Flow (Current): (Organize) -> Flow Chart (HTML/CSS with Tailwind). No SVG, No Mermaid.
    - Installation Flow (Future Ansible): (Organize) -> Simplified Flow Chart (HTML/CSS with Tailwind). No SVG, No Mermaid.
    - All Chart.js instances will use Canvas, include 16-char label wrapping logic, and the required tooltip configuration.
    - Chart containers will be styled for responsiveness.
    -->

    <header class="bg-white shadow-md py-6 sticky-nav">
        <div class="container mx-auto px-6 text-center">
            <h1 class="text-4xl font-bold section-title">Linux Installer: Baseline for Development & Audio Studio OS</h1>
            <p class="text-lg text-gray-700 mt-2">An In-Depth Look at the `installer.sh` Script and Project Evolution</p>
        </div>
    </header>

    <main class="container mx-auto px-6 py-8">
        
        <section id="introduction" class="mb-12">
            <div class="card">
                <h2 class="text-3xl font-semibold mb-4 section-title">1. Dissecting the Anatomy of a Specialized Linux OS Baseline</h2>
                <p class="mb-4 text-gray-700">This report delves into the structure and capabilities of the `installer.sh` script, now refocused as a foundational element for a **development and audio studio operating system**. We analyze its package ecosystem, configuration choices, and overall installation philosophy to understand how users are empowered to build their ideal Linux environments, specifically tailored for demanding creative and technical workflows. Key project modernization initiatives, including robust documentation and versioning, underpin this specialized vision.</p>
                <div class="text-center p-6 bg-blue-50 rounded-lg">
                    <p class="text-xl text-gray-800">Total Unique Packages Profiled in this Installer:</p>
                    <p id="totalUniquePackages" class="text-6xl stat-number mt-2">250</p>
                    <p class="text-sm text-gray-600 mt-1">(A comprehensive foundation for specialized tasks)</p>
                </div>
            </div>
        </section>

        <section id="package-ecosystem" class="mb-12">
            <div class="card">
                <h2 class="text-3xl font-semibold mb-4 section-title">2. Package Ecosystem Redefined: Categorization for Specialized Workflows</h2>
                <p class="mb-6 text-gray-700">The installer's package management is undergoing a significant overhaul, moving from overlapping arrays to a refined, categorized structure. This aims to eliminate redundancy, improve maintainability, and provide a clearer understanding of each package's functional role, especially crucial when building a lean yet powerful system for development and audio production. This new approach ensures a robust and transparent installation process, optimized for performance and stability.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <div>
                        <h3 class="text-xl font-semibold mb-2 text-gray-800">Core System vs. Essential Tools Breakdown</h3>
                        <p class="text-gray-600 mb-4">This chart illustrates the proportional split between the absolute minimum packages required for a bootable system (`_CORE_SYSTEM_PKGS`) and crucial command-line utilities essential for any functional environment (`_ESSENTIAL_TOOLS_PKGS`), forming the bedrock for development and audio tasks.</p>
                        <div class="chart-container h-64 md:h-80">
                            <canvas id="coreVsEssentialChart"></canvas>
                        </div>
                    </div>
                    <div class="space-y-4">
                        <div class="p-4 bg-green-50 rounded-lg">
                            <p class="text-lg text-gray-800">Core System Packages (`_CORE_SYSTEM_PKGS`):</p>
                            <p id="coreSystemPackagesCount" class="text-4xl stat-number">18</p>
                            <p class="text-sm text-gray-600">Absolute minimum for a bootable Arch Linux system.</p>
                        </div>
                        <div class="p-4 bg-yellow-50 rounded-lg">
                            <p class="text-lg text-gray-800">Essential Tools Packages (`_ESSENTIAL_TOOLS_PKGS`):</p>
                            <p id="essentialToolsPackagesCount" class="text-4xl stat-number" style="color: #FFC107;">35</p>
                            <p class="text-sm text-gray-600">Crucial command-line utilities and libraries, including core development tools.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="desktop-experience" class="mb-12">
            <div class="card">
                <h2 class="text-3xl font-semibold mb-4 section-title">3. The Desktop Experience: Optimized for Productivity</h2>
                <p class="mb-6 text-gray-700">The true power of Linux lies in its flexibility, especially when tailoring an environment for peak productivity. This installer exemplifies this by offering a wide array of choices for the graphical environment, from lightweight window managers ideal for focused work to robust login screens. The ongoing integration of Sway (Wayland) further expands these modern customization options, prioritizing efficiency and a distraction-free workspace for developers and audio engineers.</p>

                <div class="mb-8">
                    <h3 class="text-2xl font-semibold mb-3 text-gray-800">3.1. Window Manager Landscape & Sway Integration</h3>
                    <p class="text-gray-600 mb-4">The installer provides several Window Managers (WMs), each with a varying ecosystem of associated component packages (`_DE_WM_COMPONENTS_PKGS`). This chart highlights the number of additional components recommended for each WM, including the newly integrated Sway Wayland compositor, indicating the potential for further customization or the completeness of the base WM package. These WMs are often chosen for their minimal overhead and configurability, vital for resource-intensive development and audio tasks.</p>
                    <div class="chart-container h-72 md:h-96">
                        <canvas id="wmComponentsChart"></canvas>
                    </div>
                </div>

                <div class="mb-8">
                    <h3 class="text-2xl font-semibold mb-3 text-gray-800">3.2. Login & Shell Preferences</h3>
                    <p class="text-gray-600 mb-4">User interaction begins with the login manager and the shell. The installer offers choices for both, catering to different preferences for aesthetics and functionality. The chart below (using illustrative popularity) shows the available options for primary DE/WM packages (`_DE_WM_CORE_PKGS`) and shell choices, emphasizing robust command-line environments essential for developers.</p>
                    <div class="chart-container h-72 md:h-96">
                        <canvas id="loginShellChart"></canvas>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-2xl font-semibold mb-3 text-gray-800">3.3. Common Desktop Utilities Ecosystem</h3>
                    <p class="text-gray-600 mb-4">Beyond core WMs, a rich set of common desktop packages (`_COMMON_DESKTOP_PKGS`) are available, covering fonts, terminals, browsers, and more. This bubble chart visualizes the relative abundance of packages within these self-identified utility categories, with a focus on tools that enhance the development and audio production experience. (Bubble size is illustrative of package count per category).</p>
                    <div class="chart-container h-80 md:h-[450px]">
                         <canvas id="commonDesktopUtilitiesChart"></canvas>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="hardware-fs" class="mb-12">
            <div class="card">
                <h2 class="text-3xl font-semibold mb-4 section-title">4. Underpinnings: High-Performance Hardware & Filesystem Support (`_HARDWARE_FS_SUPPORT_PKGS`)</h2>
                <p class="mb-6 text-gray-700">Broad hardware compatibility and robust filesystem support are critical for any operating system, especially one designed for demanding development and audio studio workloads. This installer includes a range of packages to address these needs, from CPU microcode updates to tools for various high-performance filesystems and essential firmware for specialized audio interfaces. This ensures the system can run optimally on diverse hardware configurations, reflecting the new `_HARDWARE_FS_SUPPORT_PKGS` category, with an emphasis on low-latency and high-throughput capabilities.</p>
                <div class="chart-container h-72 md:h-96">
                    <canvas id="hardwareSupportChart"></canvas>
                </div>
                <p class="mt-4 text-gray-600 text-sm">The chart showcases the types of hardware and filesystem support packages available, distinguishing between those included in the base ISO and those added conditionally based on detected hardware or user choices. This adaptive approach optimizes the installation for specific needs, including real-time audio processing and rapid data access for large project files.</p>
            </div>
        </section>

        <section id="user-selectable-apps" class="mb-12">
            <div class="card">
                <h2 class="text-3xl font-semibold mb-4 section-title">5. Tailoring the Experience: Specialized Applications (`_USER_SELECTABLE_PKGS`)</h2>
                <p class="mb-6 text-gray-700">The installer empowers users to go beyond the default package sets by offering a curated list of user-selectable applications, specifically chosen for development and audio studio environments. This allows for a highly personalized system tailored to specific workflows, whether for coding, digital audio workstation (DAW) usage, or multimedia production. The pictograph below represents the variety of application categories available under the new `_USER_SELECTABLE_PKGS` category, highlighting the breadth of tools for creative and technical professionals.</p>
                <div id="userAppsPictograph" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-6 text-center">
                </div>
                 <p class="mt-4 text-gray-600 text-sm">Each icon represents a category of applications users can opt to install, highlighting the installer's commitment to user choice and software availability for specialized tasks.</p>
            </div>
        </section>

        <section id="installation-process" class="mb-12">
            <div class="card">
                <h2 class="text-3xl font-semibold mb-4 section-title">6. The User Journey: Installation Process Flow</h2>
                <p class="mb-6 text-gray-700">Understanding the installation process itself provides insights into the installer's design and user experience. The following flowcharts illustrate the key stages a user navigates to set up their system, from the current `installer.sh` script to the planned Ansible-driven approach. This structured approach guides users through complex configurations methodically, ensuring a stable and reliable installation for a specialized OS.</p>
                
                <h3 class="text-2xl font-semibold mb-3 text-gray-800">6.1. Current `installer.sh` Flow</h3>
                <div class="space-y-2 mb-8">
                    <div class="flowchart-step">Start: Initial Checks & Setup</div>
                    <div class="flowchart-arrow">â†“</div>
                    <div class="flowchart-step">Storage Management (Optional)</div>
                    <div class="flowchart-arrow">â†“</div>
                    <div class="flowchart-step">* Mount Partitions</div>
                    <div class="flowchart-arrow">â†“</div>
                    <div class="flowchart-step">* User and Password Configuration</div>
                    <div class="flowchart-arrow">â†“</div>
                    <div class="flowchart-step">* System Configuration (Locale, Timezone, Kernel, Bootloader)</div>
                    <div class="flowchart-arrow">â†“</div>
                    <div class="flowchart-step">Select Session(s) (WM/DE)</div>
                    <div class="flowchart-arrow">â†“</div>
                    <div class="flowchart-step">Select Additional Packages</div>
                    <div class="flowchart-arrow">â†“</div>
                    <div class="flowchart-step">Run Custom Command (Optional)</div>
                    <div class="flowchart-arrow">â†“</div>
                    <div class="flowchart-step">View Configuration Summary</div>
                    <div class="flowchart-arrow">â†“</div>
                    <div class="flowchart-step">* Complete Install (Base, Packages, Bootloader)</div>
                    <div class="flowchart-arrow">â†“</div>
                    <div class="flowchart-step">Finalization & Reboot</div>
                </div>
                <p class="mt-4 text-gray-600 text-sm">The current `installer.sh` provides a comprehensive, dialog-based step-by-step installation, allowing for initial setup of a specialized baseline.</p>

                <h3 class="text-2xl font-semibold mb-3 text-gray-800 mt-12">6.2. Future State: Ansible-Driven Installation Flow</h3>
                <div class="space-y-2">
                    <div class="flowchart-step">Start: Live ISO Boot</div>
                    <div class="flowchart-arrow">â†“</div>
                    <div class="flowchart-step">Run Pre-flight Script (Interactive User Choices)</div>
                    <div class="flowchart-arrow">â†“</div>
                    <div class="flowchart-step">Generate Ansible Variables File</div>
                    <div class="flowchart-arrow">â†“</div>
                    <div class="flowchart-step">Execute Ansible Playbook (`bootstrap.yml`)</div>
                    <div class="flowchart-arrow">â†“</div>
                    <div class="flowchart-step">Ansible Roles Perform Installation Tasks</div>
                    <div class="flowchart-arrow">â†“</div>
                    <div class="flowchart-step">System Ready & Reboot</div>
                </div>
                <p class="mt-4 text-gray-600 text-sm">The future Ansible-driven approach combines interactive user input with declarative automation for enhanced maintainability and reliability, particularly beneficial for reproducible specialized OS deployments.</p>
            </div>
        </section>

        <section id="modernization-initiatives" class="mb-12">
            <div class="card">
                <h2 class="text-3xl font-semibold mb-4 section-title">7. Project Modernization Initiatives: Building a Robust Development & Audio Platform</h2>
                <p class="mb-6 text-gray-700">Beyond the core installation process, the project is actively pursuing several key modernization initiatives to enhance its overall robustness, maintainability, and user experience, specifically tailored for demanding development and audio studio environments. These efforts address identified weaknesses and align with best practices in Linux distribution development.</p>

                <div class="project-initiative">
                    <h3 class="text-xl font-semibold mb-2 text-gray-800">7.1. Migration to Ansible-based Installer</h3>
                    <p class="text-gray-700">A significant architectural shift is underway: replacing the monolithic `installer.sh` with the modular `syncopated-ansible-installer`. This transition aims to improve maintainability, modularity, and idempotency, leveraging Ansible's declarative approach for a more reliable and extensible installation process. This is crucial for developers and audio engineers who require reproducible and easily configurable systems.</p>
                </div>

                <div class="project-initiative">
                    <h3 class="text-xl font-semibold mb-2 text-gray-800">7.2. Introduction of Pre-flight User Input Script</h3>
                    <p class="text-gray-700">To bridge the interactivity gap between the `dialog`-based `installer.sh` and Ansible's declarative model, a "pre-flight" script is being developed. This script will interactively gather user choices in the live ISO environment and generate an Ansible variables file, ensuring a familiar user experience while benefiting from Ansible's backend. This allows specialized configurations (e.g., specific audio drivers, development toolchains) to be easily selected upfront.</p>
                </div>

                <div class="project-initiative">
                    <h3 class="text-xl font-semibold mb-2 text-gray-800">7.3. Comprehensive Testing & Auditing</h3>
                    <p class="text-gray-700">Rigorous testing is non-negotiable for a stable development and audio platform. This includes expanding automated VM-based testing (using `run_test_vm.rb`), incorporating Ansible Molecule for role-level testing, and conducting thorough security and code audits of all custom scripts (including `installer.sh`) to catch regressions and vulnerabilities early. This ensures the baseline OS is rock-solid for critical workflows.</p>
                </div>

                <div class="project-initiative">
                    <h3 class="text-xl font-semibold mb-2 text-gray-800">7.4. Enhanced Documentation & Versioning</h3>
                    <p class="text-gray-700">Addressing critical weaknesses, efforts are focused on creating comprehensive `README.md` documentation detailing project goals, features, and usage. A robust Git-based versioning scheme is also being implemented to ensure reproducible builds and better tracking of project evolution. This is vital for users who need to understand and replicate their specialized OS setups.</p>
                </div>

                <div class="project-initiative">
                    <h3 class="text-xl font-semibold mb-2 text-gray-800">7.5. Sway (Wayland) Window Manager Integration</h3>
                    <p class="text-gray-700">To offer a modern, high-performance desktop environment, support for the Sway window manager is being integrated. Sway, a Wayland compositor, is ideal for development and audio work due to its efficiency, tiling capabilities, and reduced latency compared to X11. This involves defining a clear package set for Sway, developing minimal default configurations, and updating the installer logic to offer Sway as an installation choice, providing users with cutting-edge desktop options.</p>
                </div>
            </div>
        </section>

        <section id="dynamic-insights" class="mb-12">
            <div class="card">
                <h2 class="text-3xl font-semibold mb-4 section-title">8. Dynamic Insights: Leveraging AI for Deeper Understanding âœ¨</h2>
                <p class="mb-6 text-gray-700">Explore the installer's intricacies with AI-powered assistance. These features leverage the Gemini API to provide on-demand explanations and configuration suggestions, enhancing your understanding of complex Linux installation aspects, particularly relevant for optimizing a development or audio studio environment.</p>

                <div class="mb-8 p-6 bg-blue-50 rounded-lg">
                    <h3 class="text-2xl font-semibold mb-3 text-gray-800">8.1. Package Explainer âœ¨</h3>
                    <p class="text-gray-600 mb-4">Enter a package name from the installer to get a concise explanation of its purpose and common use cases, helping you understand its role in a specialized OS.</p>
                    <div class="flex flex-col sm:flex-row gap-4">
                        <input type="text" id="packageNameInput" placeholder="e.g., jack2" class="flex-grow p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <button id="explainPackageBtn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-md transition duration-300 ease-in-out shadow-md">Explain Package</button>
                    </div>
                    <div id="packageExplanationOutput" class="mt-4 p-4 bg-white rounded-lg border border-gray-200 hidden">
                        <p class="text-gray-700" id="packageExplanationText"></p>
                        <div id="packageExplanationLoading" class="text-center mt-2 hidden">
                            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"></div>
                            <p class="text-gray-500 text-sm mt-1">Generating explanation...</p>
                        </div>
                    </div>
                </div>

                <div class="p-6 bg-green-50 rounded-lg">
                    <h3 class="text-2xl font-semibold mb-3 text-gray-800">8.2. Advanced Configuration Tips âœ¨</h3>
                    <p class="text-gray-600 mb-4">Select an installation component to receive advanced configuration tips for optimizing your system, crucial for fine-tuning a development or audio studio environment.</p>
                    <div class="flex flex-col sm:flex-row gap-4">
                        <select id="configComponentSelect" class="flex-grow p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="grub">GRUB Bootloader</option>
                            <option value="network">Network Configuration</option>
                            <option value="filesystem">Filesystem Mount Options</option>
                            <option value="kernel">Kernel Parameters</option>
                        </select>
                        <button id="getConfigTipsBtn" class="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-md transition duration-300 ease-in-out shadow-md">Get Tips</button>
                    </div>
                    <div id="configTipsOutput" class="mt-4 p-4 bg-white rounded-lg border border-gray-200 hidden">
                        <p class="text-gray-700" id="configTipsText"></p>
                        <div id="configTipsLoading" class="text-center mt-2 hidden">
                            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-green-500 mx-auto"></div>
                            <p class="text-gray-500 text-sm mt-1">Generating tips...</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="conclusion" class="mb-12">
            <div class="card">
                <h2 class="text-3xl font-semibold mb-4 section-title">9. Conclusion: A Flexible, Evolving Baseline for Specialized Linux Environments</h2>
                <p class="mb-4 text-gray-700">The `installer.sh` script, and the broader project it belongs to, represents a significant trend in Linux distribution installers: a decisive move towards offering deep customization while maintaining a structured and user-friendly process. The ongoing migration to an Ansible-based backend, coupled with initiatives for improved documentation, rigorous testing, and modern desktop environment integration like Sway, underscores a strong commitment to building a highly maintainable, scalable, and adaptable system. This foundation is explicitly designed to serve as a **powerful baseline for development and audio studio operating systems**.</p>
                <p class="text-gray-700">The "market" for such specialized installers values precision, performance, and the ability to tailor a system for demanding creative and technical workflows. As Linux continues to evolve, these modernization efforts will play a crucial role in empowering developers and audio engineers to harness the full potential of their systems. The emphasis on providing a solid, optimized foundation and extensive options ensures a robust and adaptable end-user experience, setting a new standard for custom, specialized Linux installations.</p>
            </div>
        </section>
    </main>

    <footer class="bg-neutral-dark text-neutral-light text-center py-8">
        <p>&copy; 2025 Installer Analysis Group. Data derived from `installer.sh` and project documentation.</p>
    </footer>

    <script>
        function wrapLabels(labels, maxWidth) {
            return labels.map(label => {
                if (typeof label === 'string' && label.length > maxWidth) {
                    const words = label.split(' ');
                    const lines = [];
                    let currentLine = '';
                    words.forEach(word => {
                        if ((currentLine + word).length > maxWidth && currentLine.length > 0) {
                            lines.push(currentLine.trim());
                            currentLine = word + ' ';
                        } else {
                            currentLine += word + ' ';
                        }
                    });
                    lines.push(currentLine.trim());
                    return lines;
                }
                return label;
            });
        }

        const commonTooltipCallbacks = {
            title: function(tooltipItems) {
                const item = tooltipItems[0];
                let label = item.chart.data.labels[item.dataIndex];
                if (Array.isArray(label)) {
                    return label.join(' ');
                }
                return label;
            }
        };
        
        const vibrantTechPalette = {
            primary: '#007BFF', 
            secondary: '#28A745', 
            accent1: '#FFC107', 
            accent2: '#DC3545', 
            neutralDark: '#343A40',
            neutralLight: '#F8F9FA',
            text: '#212529'
        };

        const packageData = {
            totalUnique: 250, 
            coreSystemPkgs: 18,
            essentialToolsPkgs: 35, 
            commonDesktopPkgs: 40,
            deWmCorePkgs: 9,
            deWmComponentsPkgs: 18,
            userSelectablePkgs: 80, 
            hardwareFsSupportPkgs: 35, 

            wmComponents: {
                'bspwm': 3, 'fluxbox': 3, 'i3-wm': 3, 'sway': 7, 'openbox': 5, 'dwm': 0 
            },
            loginManagers: ['ly', 'greetd', 'console (xorg-xinit)', 'lightdm'],
            shells: ['zsh', 'bash', 'mksh'], 
            commonDesktopCategories: { 
                'Fonts': 10, 'Terminals': 7, 
                'System Utilities': 15, 'Graphics & Display': 8, 
                'Networking': 5, 'Development Tools': 10 
            }, 
            hardwareSupport: {
                microcode: { iso: 2, conditional: 0 }, 
                filesystem: { iso: 8, conditional: 7 }, 
                firmware: { iso: 5, conditional: 5 } 
            },
            userSelectableApps: [
                { category: 'Development IDEs', icon: 'ðŸ‘¨â€ðŸ’»', count: 10 },
                { category: 'Version Control', icon: 'ðŸŒ³', count: 5 },
                { category: 'Audio Production', icon: 'ðŸŽ§', count: 12 },
                { category: 'Audio Utilities', icon: 'ðŸŽ›ï¸', count: 8 },
                { category: 'Graphics & Design', icon: 'ðŸŽ¨', count: 6 },
                { category: 'Multimedia Playback', icon: 'ðŸŽ¬', count: 5 },
                { category: 'Networking Tools', icon: 'ðŸ“¡', count: 4 },
                { category: 'Office & Productivity', icon: 'ðŸ“„', count: 5 },
                { category: 'System Utilities', icon: 'âš™ï¸', count: 15 }
            ]
        };
        
        document.getElementById('totalUniquePackages').textContent = packageData.totalUnique;
        document.getElementById('coreSystemPackagesCount').textContent = packageData.coreSystemPkgs;
        document.getElementById('essentialToolsPackagesCount').textContent = packageData.essentialToolsPkgs;

        const coreVsEssentialCtx = document.getElementById('coreVsEssentialChart').getContext('2d');
        new Chart(coreVsEssentialCtx, {
            type: 'doughnut',
            data: {
                labels: wrapLabels(['Core System Packages', 'Essential Tools Packages'], 16),
                datasets: [{
                    label: 'Package Types',
                    data: [packageData.coreSystemPkgs, packageData.essentialToolsPkgs],
                    backgroundColor: [vibrantTechPalette.primary, vibrantTechPalette.secondary],
                    borderColor: [vibrantTechPalette.neutralLight, vibrantTechPalette.neutralLight],
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'top' },
                    tooltip: { callbacks: commonTooltipCallbacks }
                }
            }
        });

        const wmComponentsCtx = document.getElementById('wmComponentsChart').getContext('2d');
        new Chart(wmComponentsCtx, {
            type: 'bar',
            data: {
                labels: wrapLabels(Object.keys(packageData.wmComponents), 16),
                datasets: [{
                    label: 'Number of Extra Components',
                    data: Object.values(packageData.wmComponents),
                    backgroundColor: vibrantTechPalette.accent1,
                    borderColor: vibrantTechPalette.neutralDark,
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: { y: { beginAtZero: true, title: { display: true, text: 'Package Count'} } },
                plugins: {
                    legend: { display: false },
                    tooltip: { callbacks: commonTooltipCallbacks }
                }
            }
        });

        const loginShellCtx = document.getElementById('loginShellChart').getContext('2d');
        new Chart(loginShellCtx, {
            type: 'bar',
            data: {
                labels: wrapLabels(['Login Managers', 'Shells'], 16), 
                datasets: [
                    {
                        label: packageData.loginManagers[0], 
                        data: [3, 0], 
                        backgroundColor: vibrantTechPalette.primary,
                    },
                    {
                        label: packageData.loginManagers[1], 
                        data: [2, 0],
                        backgroundColor: vibrantTechPalette.secondary,
                    },
                    {
                        label: packageData.loginManagers[3], 
                        data: [4,0],
                        backgroundColor: vibrantTechPalette.accent1,
                    },
                     {
                        label: packageData.loginManagers[2], 
                        data: [5,0],
                        backgroundColor: vibrantTechPalette.accent2,
                    },
                    {
                        label: packageData.shells[0], 
                        data: [0, 5], 
                        backgroundColor: vibrantTechPalette.primary,
                        stack: 'Stack 1',
                    },
                    {
                        label: packageData.shells[1], 
                        data: [0, 4],
                        backgroundColor: vibrantTechPalette.secondary,
                        stack: 'Stack 1',
                    },
                     {
                        label: packageData.shells[2], 
                        data: [0, 2],
                        backgroundColor: vibrantTechPalette.accent1,
                        stack: 'Stack 1',
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: { 
                    x: { stacked: true },
                    y: { beginAtZero: true, stacked: true, title: {display: true, text: 'Illustrative Popularity Score'} } 
                },
                plugins: {
                    tooltip: { mode: 'index', intersect: false, callbacks: commonTooltipCallbacks }
                }
            }
        });
        
        const commonDesktopCtx = document.getElementById('commonDesktopUtilitiesChart').getContext('2d');
        const bubbleData = Object.entries(packageData.commonDesktopCategories).map(([key, value], index) => ({
            x: Math.random() * 10, 
            y: Math.random() * 10,
            r: Math.sqrt(value) * 4, 
            label: key, 
            count: value 
        }));

        new Chart(commonDesktopCtx, {
            type: 'bubble',
            data: {
                datasets: [{
                    label: 'Desktop Utility Categories',
                    data: bubbleData,
                    backgroundColor: [
                        vibrantTechPalette.primary + 'BF', 
                        vibrantTechPalette.secondary + 'BF',
                        vibrantTechPalette.accent1 + 'BF',
                        vibrantTechPalette.accent2 + 'BF',
                        '#6f42c1BF', 
                        '#fd7e14BF'  
                    ],
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: { display: false },
                    y: { display: false }
                },
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                const item = context.raw;
                                return `${item.label}: ${item.count} packages`;
                            }
                        }
                    }
                }
            }
        });


        const hardwareSupportCtx = document.getElementById('hardwareSupportChart').getContext('2d');
        new Chart(hardwareSupportCtx, {
            type: 'bar',
            data: {
                labels: wrapLabels(['CPU Microcode', 'Filesystem Tools', 'Peripheral Firmware'], 16),
                datasets: [
                    {
                        label: 'Included in Base ISO',
                        data: [
                            packageData.hardwareSupport.microcode.iso,
                            packageData.hardwareSupport.filesystem.iso,
                            packageData.hardwareSupport.firmware.iso
                        ],
                        backgroundColor: vibrantTechPalette.primary,
                    },
                    {
                        label: 'Added Conditionally',
                        data: [
                            packageData.hardwareSupport.microcode.conditional,
                            packageData.hardwareSupport.filesystem.conditional,
                            packageData.hardwareSupport.firmware.conditional
                        ],
                        backgroundColor: vibrantTechPalette.accent1,
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: { stacked: true },
                    y: { stacked: true, beginAtZero: true, title: { display: true, text: 'Number of Packages/Package Groups'} }
                },
                plugins: {
                    tooltip: { mode: 'index', intersect: false, callbacks: commonTooltipCallbacks }
                }
            }
        });

        const pictographContainer = document.getElementById('userAppsPictograph');
        packageData.userSelectableApps.forEach(appCat => {
            const div = document.createElement('div');
            div.className = 'p-4 bg-gray-100 rounded-lg shadow hover:shadow-lg transition-shadow';
            div.innerHTML = `
                <div class="text-4xl mb-2">${appCat.icon}</div>
                <p class="font-semibold text-gray-700">${appCat.category}</p>
                <p class="text-sm text-gray-500">(${appCat.count} options)</p>
            `;
            pictographContainer.appendChild(div);
        });

        document.getElementById('explainPackageBtn').addEventListener('click', async () => {
            const packageName = document.getElementById('packageNameInput').value.trim();
            const outputDiv = document.getElementById('packageExplanationOutput');
            const outputText = document.getElementById('packageExplanationText');
            const loadingDiv = document.getElementById('packageExplanationLoading');

            if (!packageName) {
                outputText.textContent = 'Please enter a package name.';
                outputDiv.classList.remove('hidden');
                return;
            }

            outputDiv.classList.remove('hidden');
            outputText.textContent = '';
            loadingDiv.classList.remove('hidden');

            try {
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: `Explain the Linux package "${packageName}" in simple terms, focusing on its purpose and common use cases. Keep the explanation concise, around 2-3 sentences.` }] });
                const payload = { contents: chatHistory };
                const apiKey = ""; 
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    outputText.textContent = text;
                } else {
                    outputText.textContent = 'Could not get an explanation. Please try again.';
                }
            } catch (error) {
                console.error('Error calling Gemini API:', error);
                outputText.textContent = 'An error occurred while fetching the explanation. Please check the console.';
            } finally {
                loadingDiv.classList.add('hidden');
            }
        });

        document.getElementById('getConfigTipsBtn').addEventListener('click', async () => {
            const component = document.getElementById('configComponentSelect').value;
            const outputDiv = document.getElementById('configTipsOutput');
            const outputText = document.getElementById('configTipsText');
            const loadingDiv = document.getElementById('configTipsLoading');

            outputDiv.classList.remove('hidden');
            outputText.textContent = '';
            loadingDiv.classList.add('hidden');

            let prompt = '';
            switch (component) {
                case 'grub':
                    prompt = 'Provide 3 advanced configuration tips for the GRUB bootloader in a Linux installation, focusing on security and performance. Format as a numbered list.';
                    break;
                case 'network':
                    prompt = 'Suggest 3 advanced network configuration tips for a fresh Linux installation, focusing on privacy and stability. Format as a numbered list.';
                    break;
                case 'filesystem':
                    prompt = 'Give 3 advanced filesystem mount options for Linux (e.g., ext4, btrfs), focusing on data integrity and performance. Format as a numbered list.';
                    break;
                case 'kernel':
                    prompt = 'List 3 advanced kernel parameters for a Linux installation, focusing on system responsiveness and power efficiency. Format as a numbered list.';
                    break;
                default:
                    outputText.textContent = 'Please select a valid component.';
                    loadingDiv.classList.add('hidden');
                    return;
            }
            loadingDiv.classList.remove('hidden');

            try {
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };
                const apiKey = ""; 
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    outputText.innerHTML = text.replace(/\n/g, '<br>'); 
                } else {
                    outputText.textContent = 'Could not get configuration tips. Please try again.';
                }
            } catch (error) {
                console.error('Error calling Gemini API:', error);
                outputText.textContent = 'An error occurred while fetching tips. Please check the console.';
            } finally {
                loadingDiv.classList.add('hidden');
            }
        });
    </script>
</body>
</html>
